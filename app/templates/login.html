<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Gol Case - Login</title>
</head>
<body>
	<body>
		<h1>Login</h1>
		<div class="error" id="error-message"></div>
		<form id="login-form" method="post">
			<div class="form-group">
				<label for="username">Nome de usuário:</label>
				<input type="text" id="username" name="username" required>
			</div>
			<div class="form-group">
				<label for="password">Senha:</label>
				<input type="password" id="password" name="password" required>
			</div>
			<button type="submit">Login</button>
		</form>
		<p>Ainda não tem uma conta? <a href="/register">Registre-se aqui!</a></p>
	
		<script>
			document.getElementById('login-form').addEventListener('submit', function(e) {
				e.preventDefault();
				
				fetch('/login', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded',
					},
					body: new URLSearchParams({
						'username': document.getElementById('username').value,
						'password': document.getElementById('password').value
					})
				})
				.then(response => response.json())
				.then(data => {
					if (data.error) {
						document.getElementById('error-message').textContent = data.error;
					} else {
						window.location.href = '/dashboard';
					}
				});
			});
		</script>
	</body>
</body>
</html>